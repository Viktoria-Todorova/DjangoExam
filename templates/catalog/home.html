{% extends 'base.html' %}
{% load static %}
{% block css %}<link rel="stylesheet" href="{% static 'home.css' %}">{% endblock %}
{% block content %}

<main class="library-header">
    <h1>WELCOME TO THE WORLD OF MAGIC</h1>

    <section class="library-story">
        <h2>The Librarian Who Remembered Every Story</h2>

        <p>
            No one knows when the Magic Library first appeared.
            One morning, between two ordinary buildings, a wooden door simply existed —
            warm to the touch even in winter.
        </p>

        <p>
            Most people never noticed it. Their eyes slipped past it, their thoughts ignored it.
            But a few stopped.
            The chosen ones.
        </p>

        <p>
            Inside were shelves stretching beyond sight, ladders climbing into mist,
            and books that did not wait to be searched — they searched for their reader.
        </p>

        <p>
            The Librarian never asked what you wanted.
            She already knew.
        </p>

        <p class="whisper">
            Every visitor borrows a story…<br>
            and leaves behind a changed ending.
        </p>
    </section>

    <form method="get" class="search-bar">
        {% csrf_token %}
        {{ form.book_name }}
        <button class="search-btn" type="submit">Search</button>
    </form>

    {% if books %}
        <h1 class ="results-heading">Search Results</h1>
        <div class="results-container">
            {% for book in books %}
                <div class="box-details">
                    <h3>{{ book.title }}</h3>
                    <p>Author: {{ book.writer }}</p>
                    {% if book.quantity > 0 %}
                        <a href="{% url 'rent_a_book' book.id %}">
                            <button type="button">Rent</button>
                        </a>
                     {% else %}
                        <p class="unavailable">Currently not available</p>
                    {% endif %}
                </div>
            {% endfor %}
        </div>

        {% if page_obj.has_other_pages %}
            <div class="pagination">
                {% if page_obj.has_previous %}
                    <a href="?page=1{% if searched_book %}&book_name={{ searched_book }}{% endif %}" class="page-link">« First</a>
                    <a href="?page={{ page_obj.previous_page_number }}{% if searched_book %}&book_name={{ searched_book }}{% endif %}" class="page-link">‹ Previous</a>
                {% endif %}

                <span class="page-current">
                    Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
                </span>

                {% if page_obj.has_next %}
                    <a href="?page={{ page_obj.next_page_number }}{% if searched_book %}&book_name={{ searched_book }}{% endif %}" class="page-link">Next ›</a>
                    <a href="?page={{ page_obj.paginator.num_pages }}{% if searched_book %}&book_name={{ searched_book }}{% endif %}" class="page-link">Last »</a>
                {% endif %}
            </div>
        {% endif %}
    {% endif %}

</main>
{% endblock %}
``
